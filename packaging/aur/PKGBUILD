# Maintainer: danlil240
# AUR package for Spectra â€” GPU-accelerated scientific plotting
# Install: makepkg -si

pkgname=spectra
pkgver=0.1.0
pkgrel=1
pkgdesc="GPU-accelerated scientific plotting library"
arch=('x86_64')
url="https://github.com/danlil240/Spectra"
license=('MIT')
depends=('vulkan-icd-loader' 'glfw' 'vulkan-driver')
makedepends=('cmake' 'glslang' 'vulkan-headers')
source=("$pkgname-$pkgver.tar.gz::https://github.com/danlil240/Spectra/archive/refs/tags/v$pkgver.tar.gz")
sha256sums=('SKIP')

build() {
    cd "Spectra-$pkgver"
    cmake -B build \
        -DCMAKE_BUILD_TYPE=Release \
        -DCMAKE_INSTALL_PREFIX=/usr \
        -DSPECTRA_BUILD_EXAMPLES=OFF \
        -DSPECTRA_BUILD_TESTS=OFF \
        -DSPECTRA_BUILD_GOLDEN_TESTS=OFF
    cmake --build build -j"$(nproc)"
}

package() {
    cd "Spectra-$pkgver"
    DESTDIR="$pkgdir" cmake --install build
    install -Dm644 LICENSE "$pkgdir/usr/share/licenses/$pkgname/LICENSE"
}
